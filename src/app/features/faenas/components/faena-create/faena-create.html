<div class="max-w-5xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8 mt-6">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6">
    {{ isEditing() ? 'Editar Detalle de Faena' : 'Crear Detalle de Faena' }}
  </h2>

  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-5">
    <!-- Fecha -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Fecha</label>
      <input
        type="date"
        formControlName="fecha"
        class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
      />
    </div>

    <!-- Propiedad -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Propiedad</label>
      <input
        type="text"
        formControlName="propiedad"
        class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
      />
    </div>

    <!-- Buscador de compra -->
    <div class="relative">
      <label class="block text-sm font-medium text-gray-700 mb-1">Compra (buscar por código)</label>
      <input
        type="text"
        [value]="searchCompra()"
        (input)="searchCompra.set($any($event.target).value)"
        placeholder="Ingrese código de compra"
        class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"
      />
      <!-- Resultados -->
      @if (filteredCompras().length > 0) {
      <ul
        class="absolute z-10 bg-white border rounded-lg mt-1 w-full shadow-lg max-h-48 overflow-y-auto"
      >
        @for (compra of filteredCompras(); track $index) {
        <li
          (click)="selectCompra(compra)"
          class="px-3 py-2 hover:bg-blue-100 cursor-pointer text-sm"
        >
          {{ compra.codigo }} — {{ compra.proveedor?.nombre }}
        </li>
        }
      </ul>
      }
    </div>

    <!-- N° Reses -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Número de Reses</label>
      <input
        type="number"
        formControlName="numeroReses"
        class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
      />
    </div>

    <!-- Totales -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Precio Devolución</label>
        <input
          type="number"
          formControlName="precioDevolucion"
          class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Total Devolución</label>
        <input
          type="number"
          formControlName="totalDevolucion"
          class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
        />
      </div>
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Transporte</label>
        <input
          type="number"
          formControlName="transporte"
          class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Otros Gastos</label>
        <input
          type="number"
          formControlName="otrosGastos"
          class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676]outline-none"
        />
      </div>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Saldo a Depositar</label>
      <input
        type="number"
        formControlName="saldoDepositar"
        class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#ff7676] outline-none"
      />
    </div>

    <!-- Botón -->
    <div class="pt-4 flex justify-end">
      <button
        type="submit"
        class="bg-[#ff7676] text-white px-6 py-2 rounded-lg hover:bg-red-500 transition"
      >
        {{ isEditing() ? 'Actualizar' : 'Guardar' }}
      </button>
    </div>
  </form>
</div>
