<aside
  class="hidden md:flex flex-col h-screen transition-all duration-300 ease-in-out bg-white border-r border-gray-200 fixed left-0 top-0 z-40"
  [class.w-72]="!isCollapsed"
  [class.w-16]="isCollapsed"
>
  <!-- Header -->
  <div
    class="flex items-center justify-between border-b border-gray-200"
    [class.p-4]="!isCollapsed"
    [class.p-3]="isCollapsed"
  >
    <div
      class="flex items-center gap-2 overflow-hidden"
      [class.justify-center]="isCollapsed"
      [class.w-full]="isCollapsed"
    >
      @if(isCollapsed){
      <!-- Logo pequeño centrado con toggle tipo hamburguesa -->
      <div class="flex items-center gap-2 justify-center w-full">
        <button
          (click)="toggleSidebar()"
          class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors duration-200 group"
        >
          <fa-icon
            [icon]="faBars"
            class="text-gray-500 group-hover:text-gray-700 text-sm transition-colors"
          ></fa-icon>
        </button>
      </div>
      } @else {
      <!-- Logo grande expandido -->
      <div class="flex justify-center items-center w-full">
        <div class="flex items-center gap-2 w-full">
          <div
            class="flex-1 h-0.5 bg-gradient-to-r from-red-500 via-yellow-400 to-red-500 rounded"
          ></div>
          <span class="text-xs font-semibold text-gray-700 tracking-wider uppercase whitespace-nowrap">
            SISTEMA VENTA CARNES
          </span>
          <div
            class="flex-1 h-0.5 bg-gradient-to-l from-red-500 via-yellow-400 to-red-500 rounded"
          ></div>
        </div>
      </div>
      }
    </div>

    @if(!isCollapsed){
    <button
      (click)="toggleSidebar()"
      class="flex items-center justify-center w-7 h-7 rounded-lg hover:bg-gray-100 transition-colors duration-200 group"
    >
      <fa-icon
        [icon]="faChevronLeft"
        class="text-gray-500 group-hover:text-gray-700 text-xs transition-colors"
      ></fa-icon>
    </button>
    }
  </div>

  <nav class="flex-1 py-2 overflow-y-auto" [class.px-4]="!isCollapsed" [class.px-2]="isCollapsed">
    <ul class="space-y-1">
      @for(item of menu; track item){
      <li>
        <a
          [routerLink]="item.route"
          routerLinkActive="bg-gray-200 text-gray-900 border-r-2 border-gray-400"
          [class]="
            isCollapsed
              ? 'flex items-center justify-center p-2.5 rounded-lg text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200 group relative'
              : 'flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200 group relative border-r-2 border-transparent'
          "
        >
          <fa-icon
            [icon]="item.icon"
            class="text-lg transition-colors flex-shrink-0"
            [class.text-base]="isCollapsed"
          ></fa-icon>
          @if(!isCollapsed){
          <span class="text-sm font-medium truncate">{{ item.label }}</span>
          } @else {
          <div
            class="absolute left-full ml-3 px-3 py-2 bg-gray-700 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-md"
          >
            {{ item.label }}
            <div
              class="absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-700 rotate-45"
            ></div>
          </div>
          }
        </a>
      </li>
      }
    </ul>
  </nav>

  @if(!isCollapsed){
  <div class="px-6 py-4 border-t border-gray-200">
    <div class="text-xs text-gray-500 text-center">
      <span class="font-medium">v1.0.0</span> • 2025
    </div>
  </div>
  }
</aside>

<button
  (click)="toggleMobile()"
  class="fixed top-4 left-4 z-[60] md:hidden flex items-center justify-center w-12 h-12 bg-gray-100 rounded-xl shadow-md border border-gray-200 hover:shadow-lg transition-all duration-200 hover:bg-gray-200 hover:border-gray-300"
>
  <fa-icon [icon]="faBars" class="text-gray-600 hover:text-gray-700 text-lg"></fa-icon>
</button>

@if(isMobileOpen){
<div
  class="fixed inset-0 bg-black bg-opacity-50 z-[55] md:hidden"
  (click)="isMobileOpen = false"
></div>
}

<div
  class="fixed inset-y-0 left-0 w-72 bg-gray-50 shadow-2xl z-[60] transform transition-transform duration-300 ease-in-out md:hidden"
  [class.translate-x-0]="isMobileOpen"
  [class.-translate-x-full]="!isMobileOpen"
>
  <div class="flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center">
        <fa-icon [icon]="faStore" class="text-white"></fa-icon>
      </div>
      <h1 class="text-lg font-semibold text-gray-800">Sistema Ventas</h1>
    </div>
    <button
      (click)="isMobileOpen = false"
      class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors duration-200"
    >
      <fa-icon [icon]="faTimes" class="text-gray-500 hover:text-gray-700 text-sm"></fa-icon>
    </button>
  </div>

  <nav class="flex-1 px-4 py-6 overflow-y-auto">
    <ul class="space-y-1">
      @for(item of menu; track item){
      <li>
        <a
          [routerLink]="item.route"
          (click)="isMobileOpen = false"
          routerLinkActive="bg-gray-200 text-gray-900"
          class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200"
        >
          <fa-icon [icon]="item.icon" class="text-lg transition-colors flex-shrink-0"></fa-icon>
          <span class="text-sm font-medium">{{ item.label }}</span>
        </a>
      </li>
      }
    </ul>
  </nav>

  <div class="px-6 py-4 border-t border-gray-200">
    <div class="text-xs text-gray-500 text-center">
      <span class="font-medium">v1.0.0</span> • 2025
    </div>
  </div>
</div>