<nav class="flex items-center justify-between bg-white shadow-md px-6 py-3 sticky top-0 z-30 border-b border-gray-200">
  <!-- Left: Logo and Mobile Menu (hidden on desktop) -->
  <div class="flex items-center gap-2 px-14 md:hidden">
    <span class="font-bold text-xl text-gray-800">Sistema de Ventas</span>
  </div>

  <!-- Center: Buscador (hidden on mobile) -->
  <div class="hidden md:flex flex-1 justify-center px-6">

  </div>

  <!-- Right: Opciones -->
  <div class="flex items-center gap-4">
    <!-- Notificaciones -->
    <!-- <button class="relative p-2 rounded-full hover:bg-gray-100 transition duration-200" title="Notificaciones">
      <fa-icon [icon]="faBell" class="text-gray-600 text-lg"></fa-icon>
      @if (notifications.length>0) {
      <span
        class="absolute -top-1 -right-1 text-xs bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow">
        {{ notifications.length }}
      </span>
      }
    </button> -->

    <!-- Configuración -->
    <!-- <button class="p-2 rounded-full hover:bg-gray-100 transition duration-200" title="Configuración">
      <fa-icon [icon]="faCog" class="text-gray-600 text-lg"></fa-icon>
    </button> -->

    <!-- Usuario -->
    <div class="relative">
      <button (click)="toggleUserMenu()"
        class="flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-100 transition duration-200 border border-transparent hover:border-indigo-200">
        <!-- Avatar -->
        @if (currentUser().avatarUrl) {
        <img [src]="currentUser().avatarUrl" alt="Avatar" class="w-8 h-8 rounded-full object-cover shadow-sm"
          onerror="this.src='/assets/default.jpg'" />
        } @else {
        <div
          class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white flex items-center justify-center font-bold shadow-sm">
          {{ currentUser().username.charAt(0).toUpperCase() }}
        </div>
        }

        <span class="hidden md:inline text-gray-800 font-medium">
          {{ currentUser().username }}
        </span>
        <fa-icon [icon]="faChevronDown" class="text-gray-500 text-sm"></fa-icon>
      </button>

      <!-- Dropdown -->
      @if (isUserMenuOpen) {
      <div
        class="absolute right-0 mt-2 w-52 bg-white border border-gray-100 rounded-xl shadow-2xl overflow-hidden z-50">
        <button
          [routerLink]="['/usuarios/perfil']"
          class="w-full text-left px-4 py-3 hover:bg-indigo-50 transition flex items-center gap-3 text-gray-700 border-b border-gray-50">
          <fa-icon [icon]="faUser" class="text-indigo-500"></fa-icon>
          <span class="font-medium">Perfil</span>
        </button>
        <button
          class="w-full text-left px-4 py-3 hover:bg-indigo-50 transition flex items-center gap-3 text-gray-700 border-b border-gray-50">
          <fa-icon [icon]="faShieldAlt" class="text-indigo-500"></fa-icon>
          <span class="font-medium">Seguridad</span>
        </button>
        <button (click)="logout()"
          class="w-full text-left px-4 py-3 hover:bg-red-50 transition flex items-center gap-3 text-red-600">
          <fa-icon [icon]="faSignOutAlt" class="text-red-500"></fa-icon>
          <span class="font-medium">Cerrar sesión</span>
        </button>
      </div>
      }
    </div>
  </div>
</nav>